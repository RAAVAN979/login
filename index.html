<!DOCTYPE html>
<html>
  <head>
    <meta name="author" content="BISHAL PANDEY" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <style>
      body {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
        background-color: rgba(30, 50, 50, 7);
      }

      .container {
        justify-content: center;
        border: 2px solid black;
        align-items: center;
        width: 60%;
        height: 50%px;
        display: flex;
        padding: 20%;
        float: center;
        flex-direction: column;
      }

      form {
        border: 2px solid yellow;
        width: 100%;
        height: 100%;
        padding: 0px 30px 50px 20px;
        line-height: 5px;
        align-items: center;
        justify-content: center;
        background-color: silver;
        display: flex;
        border-radius: 20px;
        flex-direction: column;
        gap: 20px;
      }

      input {
        margin: 5px;
        border: 2px solid silver;
        border-radius: 20px;
        width: 180px;
        height: 20px;
        border: none;
        text-align: center;
        padding: 0px 5px 0px 0px;
      }

      #log {
        width: 90px;
        align-items: center;
        float: left;
        height: 20px;
        background-color: blue;
        border: 1px solid white;
        border-radius: 20%;
        color: white;
        font-family: verdana;
        cursor: pointer;
      }

      #sign {
        width: 90px;
        cursor: pointer;
      }

      .butn {
        display: flex;
        gap: 10px;
        margin-top: 10px;
      }

      .sign-up {
        display: none;
      }

      .signing-up {
        display: block;
        display: flex;
      }

      .hideLogin {
        display: none;
      }

      .come {
        color: white;
        font-family: verdana;
        font-size: 20px;
      }

      #error {
        text-align: center;
        font-family: verdana;
        padding: 5px 5px 5px 5px;
        color: red;
      }

      #submit {
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <form class="login">
        <p class="come">Welcome to the real world</p>
        <p id="error"></p>
        <input
          id="emaiL"
          type="email"
          placeholder="Enter your email...."
          required
        />
        <input
          id="passL"
          type="password"
          placeholder="Enter your password...."
          equired
        />
        <div class="butn">
          <button id="log" type="button" onclick="logIn(event);">LOG IN</button>

          <button id="sign" type="button" onclick="hideMe();">SIGN UP</button>
        </div>
        <a class="forgot" href="#">Forgot password? </a>
      </form>

      <form class="sign-up">
        <p id="welcome"></p>
        <input type="text" placeholder="First Name" id="Fname" required />
        <input type="text" placeholder="Last Name" id="name" required />
        <input
          type="email"
          placeholder="Enter your email"
          id="email-signup"
          required
        />

        <input
          type="password"
          placeholder="Create password"
          id="pass-signup"
          required
        />

        <button type="submit" id="submit" onclick="submitForm()">Submit</button>
      </form>
    </div>
     <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database.js"></script>
    <script>
      const firebaseConfig = {
  apiKey: "AIzaSyDmK2AdZBBUHBDMkOeQi_eA94qklnQ87E0",
  authDomain: "login-9880f.firebaseapp.com",
  databaseURL: "https://login-9880f-default-rtdb.firebaseio.com",
  projectId: "login-9880f",
  storageBucket: "login-9880f.appspot.com",
  messagingSenderId: "363044743153",
  appId: "1:363044743153:web:f345b910ee8e622f6ec650",
  measurementId: "G-0S5H6RMT9Z",
};

const app = firebase.initializeApp(firebaseConfig);

const auth = firebase.auth();

const database = firebase.database();

function submitForm(event) {
  event.preventDefault();
  const emailN = document.getElementById("email-signup").value;
  const passN = document.getElementById("pass-signup").value;
  const nameF = document.getElementById("Fname").value;
  const nameL = document.getElementById("name").value;

  if (validateEmail(emailN) === false || validatePassword(passN) === false) {
    document.getElementById(
      "welcome"
    ).innerText = `Email Or Password does not meet the requirement`;
    return;
  }
  if (validateFirstname(nameF) === false || validateLastname(nameL) === false) {
    document.getElementById("welcome").innerText = `Name field is missing`;
    return;
  }

  auth.createUserWithEmailAndPassword(emailN, passN).then(function () {
      var user = auth.currentUser;

      var database_ref = database.ref();

      var user_data = {
        email: emailN,
        nameF: nameF,
        nameL: nameL,
        last_login: Date.now(),
      };

      database_ref.child("users/" + user.uid).set(user_data);
      document.getElementById("welcome").innerText =
        "Your account is created successfully";
    })
    .catch(function (error) {
      var error_code = error.code;
      var error_message = error.message;
      document.getElementById("welcome").innerText = error.message;
    });
}

function validateEmail(email) {
  expression = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  if (expression.test(email) === true) {
    return true;
  } else {
    return false;
  }
}
function validatePassword(password) {
  if (password.length < 8) {
    return false;
  } else {
    return true;
  }
}
function validateFirstname(name) {
  if (name === null) {
    return false;
  } else if (name.length <= 0) {
    return false;
  } else {
    return true;
  }
}

function validateLastname(name) {
  if (name === null) {
    return false;
  } else if (name.length <= 0) {
    return false;
  } else {
    return true;
  }
}

function logIn(event) {
  event.preventDefault();
  let emailP = document.getElementById("emaiL").value;
  let passP = document.getElementById("passL").value;
  let sucessPass = localStorage.getItem(emailP);

  if (sucessPass && sucessPass === passP) {
    window.location.href =
      "https://www.facebook.com/profile.php?id=100005607379486&locale=en_GB";
  } else {
    document.getElementById("error").innerText = `Invalid Email Or Password`;
  }
}

function hideMe() {
  document.querySelector(".sign-up").classList.add("signing-up");
  document.querySelector(".login").classList.add("hideLogin");
}
    </script>
  </body>
     
       
</html>
